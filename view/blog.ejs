<!DOCTYPE html>
<html lang="en">
  <head>
    <%- include('./partials/head') %>
    <title>Blog</title>
  </head>
  <body>
    <%- include('./partials/nav') %>

<div class="container mt-4">
  <h1><%= blog.title %></h1>
  <img src="<%= blog.coverImageURL || 'https://via.placeholder.com/700x300?text=No+Image' %>" width="700px" />
  <pre class="mt-3"><%= blog.body %></pre>
</div>

<div class="container mt-4">
  <% if (blog.createdBy) { %>
    <img src="<%= blog.createdBy.profileImageURL || 'https://via.placeholder.com/50' %>" width="50px" />
    <%= blog.createdBy.fullName || "Anonymous" %>
  <% } else { %>
    <p><strong>Posted by:</strong> Unknown</p>
  <% } %>
</div>

<div class="container mt-3">
  <h1>Comments (<%= comments.length %>)</h1>
  <% if (locals.user) { %>
    <form action="/blog/comment/<%= blog._id %>" method="post">
      <div class="mb-3">
        <input
          type="text"
          name="content"
          class="form-control"
          placeholder="Enter your comment"
        />
        <button class="btn btn-sm btn-primary" type="submit">Add</button>
      </div>
    </form>
  <% } %>

  <div class="mt-3">
    <% comments.forEach(comment => { %>
      <div>
        <% if (comment.createdBy) { %>
          <img src="<%= comment.createdBy.profileImageURL || 'https://via.placeholder.com/50' %>" width="50px" />
          <%= comment.createdBy.fullName || "Anonymous" %>
        <% } else { %>
          <p><strong>Comment by:</strong> Unknown</p>
        <% } %>
        <pre><%= comment.content %></pre>
      </div>
    <% }) %>
  </div>
</div>


    <%- include('./partials/scripts') %>
  </body>
</html>
